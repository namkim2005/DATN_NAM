<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/layout}">

<head>
    <title>Chi tiết sản phẩm</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            corePlugins: { preflight: false },
            prefix: 'tw-',
            theme: {
                extend: {
                    colors: {
                        'project-primary': '#dead6f',
                        'project-primary-dark': '#c19b5b',
                        'project-primary-light': '#f0d4a0',
                        'project-gray': '#f8f9fa',
                        'project-dark': '#2c3e50'
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" th:href="@{/css/admin/sanpham/sanpham-chitiet.css}">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>

<body>
<section layout:fragment="content">
    <div class="tw-p-6 tw-space-y-6">
        <!-- Success/Error Messages -->
        <div th:if="${success}" class="tw-bg-green-50 tw-border tw-border-green-200 tw-rounded-lg tw-p-4">
            <div class="tw-flex">
                <i class="fas fa-check-circle tw-text-green-400 tw-mr-3"></i>
                <div class="tw-text-sm tw-text-green-700" th:text="${success}"></div>
            </div>
        </div>
        <div th:if="${error}" class="tw-bg-red-50 tw-border tw-border-red-200 tw-rounded-lg tw-p-4">
            <div class="tw-flex">
                <i class="fas fa-exclamation-circle tw-text-red-400 tw-mr-3"></i>
                <div class="tw-text-sm tw-text-red-700" th:text="${error}"></div>
            </div>
        </div>

        <!-- Product Info Card -->
        <div class="tw-bg-white tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-p-6">
            <h3 class="tw-text-lg tw-font-semibold tw-text-gray-900 tw-mb-4 tw-flex tw-items-center">
                <i class="fas fa-info-circle tw-mr-2 tw-text-project-primary"></i>
                Thông tin sản phẩm
            </h3>
            <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-3 tw-gap-4">
                <div>
                    <span class="tw-text-sm tw-text-gray-500">Mã sản phẩm:</span>
                    <p class="tw-font-medium" th:text="${sanPham.ma}">SP000001</p>
                </div>
                <div>
                    <span class="tw-text-sm tw-text-gray-500">Tên sản phẩm:</span>
                    <p class="tw-font-medium" th:text="${sanPham.ten}">Tên sản phẩm</p>
                </div>
                <div>
                    <span class="tw-text-sm tw-text-gray-500">Danh mục:</span>
                    <p class="tw-font-medium" th:text="${sanPham.danhMuc != null ? sanPham.danhMuc.ten : 'Chưa phân loại'}">Danh mục</p>
                </div>
            </div>
        </div>

        <!-- Existing Variants Section -->
        <div class="tw-bg-white tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-overflow-hidden">
            <div class="tw-px-6 tw-py-4 tw-border-b tw-border-gray-200">
                <h3 class="tw-text-lg tw-font-semibold tw-text-gray-900 tw-flex tw-items-center">
                    <i class="fas fa-list tw-mr-2 tw-text-project-primary"></i>
                    Các biến thể đã có
                </h3>
            </div>
            
            <!-- Bảng chi tiết sản phẩm -->
            <div class="tw-overflow-x-auto">
                <table class="tw-w-full tw-text-sm tw-border-collapse">
                    <thead class="tw-bg-gray-50">
                    <tr>
                        <th class="tw-text-left tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Màu</th>
                        <th class="tw-text-left tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Size</th>
                        <th class="tw-text-right tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Số lượng</th>
                        <th class="tw-text-right tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Giá gốc</th>
                        <th class="tw-text-right tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Giá nhập</th>
                        <th class="tw-text-right tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Giá bán</th>
                        <th class="tw-text-left tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Đợt giảm</th>
                        <th class="tw-text-center tw-px-6 tw-py-3 tw-font-medium tw-text-gray-700">Thao tác</th>
                    </tr>
                    </thead>
                    <tbody class="tw-bg-white">
                    <tr th:each="ct : ${pageChiTiet != null ? pageChiTiet.content : {}}" th:data-variant-id="${ct.id}" class="tw-border-b tw-border-gray-100 hover:tw-bg-gray-50">
                        <td th:text="${ct.mauSac.ten}" class="tw-px-6 tw-py-4"></td>
                        <td th:text="${ct.size.ten}" class="tw-px-6 tw-py-4"></td>
                        <td th:text="${ct.soLuong}" class="tw-text-right tw-px-6 tw-py-4"></td>
                        <td class="tw-text-right tw-px-6 tw-py-4" th:text="${#numbers.formatDecimal(ct.giaGoc,0,'COMMA',0,'POINT')} + ' ₫'"></td>
                        <td class="tw-text-right tw-px-6 tw-py-4" th:text="${#numbers.formatDecimal(ct.giaNhap,0,'COMMA',0,'POINT')} + ' ₫'"></td>
                        <td class="tw-text-right tw-px-6 tw-py-4" th:text="${ct.giaBan != null ? #numbers.formatDecimal(ct.giaBan,0,'COMMA',0,'POINT') + ' ₫' : '—'}"></td>
                        <td class="tw-px-6 tw-py-4" th:text="${ct.dotGiamGia != null ? ct.dotGiamGia.ma : 'Không'}"></td>
                        <td class="tw-text-center tw-px-6 tw-py-4">
                            <button type="button" 
                                    th:onclick="'openDeleteConfirm(' + ${ct.id} + ', this)'"
                                    class="tw-text-gray-400 hover:tw-text-gray-600 hover:tw-scale-110 tw-transition-all tw-duration-200 tw-ease-in-out tw-cursor-pointer tw-p-2">
                                <i class="fas fa-trash tw-text-lg"></i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="tw-flex tw-items-center tw-justify-between tw-px-6 tw-py-4 tw-bg-gray-50">
                <div class="tw-text-sm tw-text-gray-600">
                    Trang <span th:text="${pageChiTiet.number + 1}"></span>/<span th:text="${pageChiTiet.totalPages}"></span> —
                    Tổng <span th:text="${pageChiTiet.totalElements}"></span> biến thể
                </div>
                <div class="tw-flex tw-gap-1">
                    <a class="tw-px-3 tw-py-2 tw-rounded-lg tw-border tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50"
                       th:classappend="${pageChiTiet.first} ? ' tw-pointer-events-none tw-opacity-50' : ''"
                       th:href="@{/admin/san-pham/xem/{id}(id=${sanPham.id}, page=${pageChiTiet.number - 1}, size=${pageChiTiet.size})}">
                        <i class="fas fa-chevron-left tw-mr-1"></i> Trước
                    </a>
                    <span class="tw-px-3 tw-py-2 tw-rounded-lg tw-border tw-border-gray-300 tw-bg-gray-100 tw-text-gray-700" th:text="${pageChiTiet.number + 1}"></span>
                    <a class="tw-px-3 tw-py-2 tw-rounded-lg tw-border tw-border-gray-300 tw-bg-white tw-text-gray-700 hover:tw-bg-gray-50"
                       th:classappend="${pageChiTiet.last} ? ' tw-pointer-events-none tw-opacity-50' : ''"
                       th:href="@{/admin/san-pham/xem/{id}(id=${sanPham.id}, page=${pageChiTiet.number + 1}, size=${pageChiTiet.size})}">
                        Sau <i class="fas fa-chevron-right tw-ml-1"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Color Selection Section -->
        <div class="tw-bg-white tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-p-6">
            <h4 class="tw-font-semibold tw-mb-4 tw-flex tw-items-center">
                <i class="fas fa-palette tw-mr-2 tw-text-project-primary"></i>
                Chọn màu (nhiều lựa chọn)
            </h4>
            <form id="colorForm" th:action="@{/admin/san-pham/xem/{id}(id=${sanPham.id})}" method="get" class="tw-space-y-4">
                <div class="tw-flex tw-flex-wrap tw-gap-3">
                    <label th:each="mau : ${cacMau}" class="tw-inline-flex tw-items-center tw-cursor-pointer">
                        <input type="checkbox" name="colorIds" th:value="${mau.id}" class="tw-sr-only color-check" th:checked="${selectedColorIds != null and selectedColorIds.contains(mau.id)}">
                        <span class="tw-px-4 tw-py-2 tw-rounded-lg tw-text-sm tw-border tw-border-gray-300 color-chip hover:tw-border-project-primary tw-transition-colors" 
                              th:data-color="${mau.maMau != null and mau.maMau != '' ? mau.maMau : '#f0f0f0'}"
                              th:data-name="${mau.ten}">
                            <span th:text="${mau.ten}">Màu</span>
                        </span>
                    </label>
                </div>
                <div class="tw-flex tw-gap-3">
                    <button type="submit" class="tw-bg-project-primary hover:tw-bg-project-primary-dark tw-text-white tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors">
                        <i class="fas fa-check tw-mr-2"></i> Áp dụng màu
                    </button>
                    <a th:href="@{/admin/san-pham/xem/{id}(id=${sanPham.id})}" class="tw-bg-gray-100 hover:tw-bg-gray-200 tw-text-gray-700 tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors">
                        <i class="fas fa-times tw-mr-2"></i> Xóa chọn
                    </a>
                </div>
            </form>
        </div>

<!--        &lt;!&ndash; Global Defaults Section &ndash;&gt;-->
<!--        <div class="tw-bg-white tw-rounded-lg tw-shadow-sm tw-border tw-border-gray-200 tw-p-6">-->
<!--            <h4 class="tw-font-semibold tw-mb-4 tw-flex tw-items-center">-->
<!--                <i class="fas fa-cogs tw-mr-2 tw-text-project-primary"></i>-->
<!--                Áp dụng mặc định cho tất cả màu đã chọn-->
<!--            </h4>-->
<!--            <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-5 tw-gap-4">-->
<!--                <div>-->
<!--                    <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá gốc (₫)</label>-->
<!--                    <input id="globalGiaGoc" type="number" min="0" step="1" class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">-->
<!--                </div>-->
<!--                <div>-->
<!--                    <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá nhập (₫)</label>-->
<!--                    <input id="globalGiaNhap" type="number" min="0" step="1" class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">-->
<!--                </div>-->
<!--                <div>-->
<!--                    <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá bán (₫)</label>-->
<!--                    <input id="globalGiaBan" type="number" min="0" step="1" class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary" readonly>-->
<!--                </div>-->
<!--                <div>-->
<!--                    <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Số lượng</label>-->
<!--                    <input id="globalSoLuong" type="number" min="5" max="1000" step="1" class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">-->
<!--                </div>-->
<!--                <div class="tw-flex tw-items-end">-->
<!--                    <button type="button" class="tw-w-full tw-bg-project-primary hover:tw-bg-project-primary-dark tw-text-white tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors"-->
<!--                            onclick="applyDefaultsGlobal(this)">-->
<!--                        <i class="fas fa-magic tw-mr-2"></i> Áp dụng tất cả-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

        <!-- Color Blocks Section -->
        <div th:each="block : ${mauBlocks}" class="tw-bg-white tw-rounded-xl tw-shadow-sm tw-border tw-border-gray-200 tw-overflow-hidden">
            <div class="tw-flex tw-items-center tw-justify-between tw-p-6 tw-border-b tw-border-gray-100 tw-bg-gray-50">
                <div class="tw-flex tw-items-center tw-gap-3">
                    <span class="tw-w-6 tw-h-6 tw-rounded tw-border tw-border-gray-300 color-indicator" 
                          th:data-color="${block.mau.maMau != null and block.mau.maMau != '' ? block.mau.maMau : '#f0f0f0'}"></span>
                    <h5 class="tw-font-semibold tw-text-lg" th:text="${block.mau.ten}">Màu</h5>
                    <span class="tw-ml-2 tw-text-xs tw-rounded-full tw-px-3 tw-py-1 tw-bg-project-primary tw-text-white tw-font-medium"
                          th:text="'Còn thiếu: ' + ${block.missingCount}">Còn thiếu: 0</span>
                </div>
            </div>

            <form th:action="@{/admin/san-pham/chitietsanpham/them(sanPhamId=${sanPham.id})}"
                  th:object="${block.form}" method="post" class="tw-p-6">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                <!-- Default values for this color -->
                <div class="tw-grid tw-grid-cols-1 md:tw-grid-cols-5 tw-gap-4 tw-mb-6 tw-p-4 tw-bg-gray-50 tw-rounded-lg">
                    <div>
                        <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá nhập (₫)</label>
                        <input th:id="'colorDefaultGiaNhap__' + ${block.mau.id}" type="number" min="0" step="1"
                               class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">
                    </div>
                    <div>
                        <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá gốc (₫)</label>
                        <input th:id="'colorDefaultGiaGoc__' + ${block.mau.id}" type="number" min="0" step="1"
                               class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">
                    </div>
<!--                    <div>-->
<!--                        <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Giá bán (₫)</label>-->
<!--                        <input th:id="'colorDefaultGiaBan__' + ${block.mau.id}" type="number" min="0" step="1"-->
<!--                               class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">-->
<!--                    </div>-->
                    <div>
                        <label class="tw-block tw-text-sm tw-font-medium tw-text-gray-700 tw-mb-2">Số lượng</label>
                        <input th:id="'colorDefaultSoLuong__' + ${block.mau.id}" type="number" min="5" max="1000" step="1"
                               class="tw-w-full tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary">
                    </div>
                    <div class="tw-flex tw-items-end">
                        <button type="button"
                                class="tw-w-full tw-bg-gray-600 hover:tw-bg-gray-700 tw-text-white tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors"
                                th:onclick="'applyDefaultsForColor(' + ${block.mau.id} + ')'">
                            <i class="fas fa-check tw-mr-2"></i> Áp dụng cho size đã chọn
                        </button>
                    </div>
                </div>

                <!-- Size table -->
                <div class="tw-overflow-x-auto">
                    <table class="tw-w-full tw-text-sm tw-border-collapse">
                        <thead>
                        <tr class="tw-bg-gray-50">
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Chọn</th>
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Size</th>
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Giá nhập</th>
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Giá gốc</th>
<!--                            <th class="tw-text-right tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Giá bán</th>-->
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Số lượng</th>
                            <th class="tw-text-left tw-px-4 tw-py-3 tw-font-medium tw-text-gray-700">Trạng thái</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="row : ${block.rows}" class="tw-border-b tw-border-gray-100 hover:tw-bg-gray-50">
                            <!-- ĐÃ CÓ: disabled + tooltip -->
                            <td class="tw-px-4 tw-py-3" th:if="${row.existed}">
                                <input type="checkbox" disabled class="tw-text-project-primary">
                            </td>
                            <td class="tw-px-4 tw-py-3" th:if="${row.existed}" th:text="${row.size.ten}">M</td>
                            <td class="tw-px-4 tw-py-3 tw-text-left" th:if="${row.existed}">
                                <span th:title="${#numbers.formatDecimal(row.giaNhap,0,'COMMA',0,'POINT')} + ' ₫'" class="tw-text-gray-500">—</span>
                            </td>
                            <td class="tw-px-4 tw-py-3 tw-text-left" th:if="${row.existed}">
                                <span th:title="${#numbers.formatDecimal(row.giaGoc,0,'COMMA',0,'POINT')} + ' ₫'" class="tw-text-gray-500">—</span>
                            </td>
<!--                            <td class="tw-px-4 tw-py-3 tw-text-right" th:if="${row.existed}">-->
<!--                                <span th:title="${row.giaBan != null ? #numbers.formatDecimal(row.giaBan,0,'COMMA',0,'POINT') + ' ₫' : 'Chưa có giá bán'}" class="tw-text-gray-500">—</span>-->
<!--                            </td>-->
                            <td class="tw-px-4 tw-py-3 tw-text-left" th:if="${row.existed}">
                                <span th:title="${row.soLuong}" class="tw-text-gray-500">—</span>
                            </td>
                            <td class="tw-px-4 tw-py-3" th:if="${row.existed}">
                                <span class="tw-text-xs tw-font-medium tw-bg-gray-200 tw-text-gray-700 tw-rounded-full tw-px-3 tw-py-1">ĐÃ CÓ</span>
                            </td>

                            <!-- CHƯA CÓ: cho phép nhập -->
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">
                                <input type="checkbox" class="row-check tw-text-project-primary" th:data-color-id="${block.mau.id}" onchange="computeTotals()">
                                <input type="hidden" th:name="'chiTietList[' + ${row.formIndex} + '].sanPham.id'" th:value="${sanPham.id}">
                                <input type="hidden" th:name="'chiTietList[' + ${row.formIndex} + '].mauSac.id'" th:value="${block.mau.id}">
                                <input type="hidden" th:name="'chiTietList[' + ${row.formIndex} + '].size.id'" th:value="${row.size.id}">
                            </td>
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}" th:text="${row.size.ten}">M</td>
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">
                                <input type="number" min="0" step="1" data-role="giaNhap"
                                       class="tw-w-32 tw-text-left tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary"
                                       th:name="'chiTietList[' + ${row.formIndex} + '].giaNhap'" th:value="${row.giaNhap}">
                            </td>
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">
                                <input type="number" min="0" step="1" data-role="giaGoc"
                                       class="tw-w-32 tw-text-left tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary"
                                       th:name="'chiTietList[' + ${row.formIndex} + '].giaGoc'" th:value="${row.giaGoc}">
                            </td>
<!--                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">-->
<!--                                <input type="number" min="0" step="1" data-role="giaBan"-->
<!--                                       class="tw-w-32 tw-text-right tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary"-->
<!--                                       th:name="'chiTietList[' + ${row.formIndex} + '].giaBan'" th:value="${row.giaBan}">-->
<!--                            </td>-->
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">
                                <input type="number" min="5" max="1000" step="1" data-role="soLuong"
                                       class="tw-w-28 tw-text-left tw-border tw-border-gray-300 tw-rounded-lg tw-px-3 tw-py-2 focus:tw-border-project-primary focus:tw-ring-1 focus:tw-ring-project-primary"
                                       th:name="'chiTietList[' + ${row.formIndex} + '].soLuong'" th:value="${row.soLuong}">
                            </td>
                            <td class="tw-px-4 tw-py-3" th:if="${!row.existed}">
                                <span class="tw-text-xs tw-text-green-600 tw-font-medium">CHƯA CÓ</span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="tw-flex tw-items-center tw-justify-between tw-mt-6 tw-pt-4 tw-border-t tw-border-gray-200">
                    <div class="tw-text-sm tw-text-gray-600">
                        <span>Đã chọn: </span><span class="tw-font-semibold tw-text-project-primary" th:id="'selectedCount__' + ${block.mau.id}">0</span> size
                    </div>
                    <div class="tw-flex tw-gap-3">
                        <button type="submit" class="tw-bg-green-600 hover:tw-bg-green-700 tw-text-white tw-rounded-lg tw-px-6 tw-py-2 tw-transition-colors"
                                onclick="return ensureAnySelected(this)">
                            <i class="fas fa-save tw-mr-2"></i> Lưu màu này
                        </button>
                        <a th:href="@{/admin/san-pham/xem/{id}(id=${sanPham.id})}" class="tw-bg-gray-100 hover:tw-bg-gray-200 tw-text-gray-700 tw-rounded-lg tw-px-6 tw-py-2 tw-transition-colors">
                            <i class="fas fa-times tw-mr-2"></i> Hủy
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal xác nhận xóa -->
    <div id="deleteConfirmModal" class="tw-fixed tw-inset-0 tw-bg-black/40 tw-hidden" style="z-index: 9999999 !important;">
        <div class="tw-absolute tw-inset-0 tw-flex tw-items-center tw-justify-center">
            <div class="tw-bg-white tw-rounded-lg tw-shadow-lg tw-w-[90%] md:tw-w-[400px] tw-p-6" style="z-index: 10000000 !important;">
                <h3 class="tw-font-semibold tw-text-lg tw-mb-3 tw-flex tw-items-center">
                    <i class="fas fa-exclamation-triangle tw-text-red-500 tw-mr-2"></i>
                    Xác nhận xóa
                </h3>
                <p class="tw-text-sm tw-text-gray-600 tw-mb-6">Bạn có chắc chắn muốn xóa biến thể này? Hành động không thể hoàn tác.</p>
                <div class="tw-flex tw-justify-end tw-gap-3">
                    <button type="button" id="btnCancelDelete" class="tw-bg-gray-100 hover:tw-bg-gray-200 tw-text-gray-700 tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors">Hủy</button>
                    <button type="button" id="btnConfirmDelete" class="tw-bg-red-500 hover:tw-bg-red-600 tw-text-white tw-rounded-lg tw-px-4 tw-py-2 tw-transition-colors">Xóa</button>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{/js/admin/sanpham/sanpham-chitiet.js}"></script>

<!-- Thay doi gia ban = gia goc   -->
    <script>
        const giaGocInput = document.getElementById("globalGiaGoc");
        const giaBanInput = document.getElementById("globalGiaBan");

        // Khi nhập giá gốc, giá bán sẽ tự động bằng giá gốc
        giaGocInput.addEventListener("input", () => {
            giaBanInput.value = giaGocInput.value;
        });
    </script>
</section>
</body>
</html>