<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{client/layout}">
<head>
    <title>Trang chủ - Yuki Dresses</title>
    <link rel="stylesheet" type="text/css" th:href="@{/client-static/css/home.css}">
</head>
<body>
<main layout:fragment="content">

  <!-- Hero Banner -->
  <section id="hero" class="ld-hero">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-12 col-lg-6 order-2 order-lg-1">
          <h1 class="ld-hero__title">Vẻ đẹp thanh lịch cho mọi khoảnh khắc</h1>
          <p class="ld-hero__subtitle">Khám phá bộ sưu tập váy mới với chất liệu cao cấp và phom dáng tôn thần thái.</p>
          <div class="d-flex gap-3 flex-wrap">
            <a th:href="@{/san-pham/danh-sach}" class="btn ld-btn ld-btn--primary">Mua ngay</a>
            <a href="#danh-muc" class="btn ld-btn ld-btn--ghost">Xem danh mục</a>
          </div>
        </div>
        <div class="col-12 col-lg-6 order-1 order-lg-2">
          <a href="">
            <div class="ld-hero__img ratio ratio-4x3 rounded-4">
              <img th:src="@{/client-static/images/banner.gif}" alt="banner" class="w-100 h-100 object-fit-cover rounded-4">
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Sale strip: Thông báo giảm giá nổi bật -->
  <section id="sale-strip" class="py-3">
    <div class="container">
      <div class="alert alert-warning d-flex flex-wrap align-items-center justify-content-between mb-0 rounded-4">
        <div class="d-flex flex-column flex-lg-row align-items-lg-center gap-2">
          <span class="badge text-bg-danger rounded-pill px-3 py-2">Giảm giá</span>
          <strong>Đợt khuyến mãi tháng này: Giảm đến 50% + Freeship đơn từ 499.000đ</strong>
          <span class="text-muted small">Thời gian: 01 - 15 hàng tháng</span>
        </div>
        <div class="mt-3 mt-lg-0">
          <a th:href="@{/san-pham/danh-sach(priceRange=500000,sortBy='price',sortDir='asc')}" class="btn btn-dark btn-sm rounded-pill px-3">Săn ưu đãi</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section id="danh-muc" class="ld-section">
    <div class="container">
      <div class="d-flex justify-content-between align-items-end mb-4 section-header">
        <h2 class="ld-title">Danh mục nổi bật</h2>
        <a th:href="@{/san-pham/danh-sach}" class="ld-link">Xem tất cả</a>
      </div>
      <div class="row g-3">
        <div class="col-6 col-md-4 col-lg-3" th:each="dm : ${danhMucs}">
          <a th:href="@{/san-pham/danh-sach(danhMucId=${dm.id})}" class="ld-category card h-100">
            <div class="ratio ratio-4x3 ld-category__media">
              <img th:src="@{${categoryImages[dm.id]} }" class="w-100 h-100 object-fit-cover rounded-4" th:alt="${dm.ten}">
            </div>
            <div class="card-body text-center">
              <h3 class="ld-category__title" th:text="${dm.ten}">Váy</h3>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- New Arrivals -->
  <section id="new-arrivals" class="ld-section">
    <div class="container">
      <div class="d-flex justify-content-between align-items-end mb-4 section-header">
        <h2 class="ld-title">Hàng mới về</h2>
        <a th:href="@{/san-pham/danh-sach(sortBy='newest',sortDir='desc')}" class="ld-link">Xem thêm</a>
      </div>
      <div class="row g-3">
        <div class="col-6 col-md-4 col-lg-3" th:each="p : ${newProducts}">
          <div class="card ld-product h-100 position-relative">
            <!-- Badge giảm giá nếu có -->
            <span class="badge text-bg-danger position-absolute top-0 start-0 m-2"
                  th:if="${p.discountPercent != null and p.discountPercent > 0}"
                  th:text="${'-' + p.discountPercent + '%'}">-30%</span>
            <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="ld-product__media ratio ratio-4x3">
              <img th:if="${p.imageUrl != null}" th:src="@{${p.imageUrl}}" class="w-100 h-100 object-fit-cover rounded-4" th:alt="${p.name}">
              <img th:unless="${p.imageUrl != null}" th:src="@{/client-static/images/insta2.jpg}" class="w-100 h-100 object-fit-cover rounded-4" th:alt="${p.name}">
            </a>
            <div class="card-body d-flex flex-column">
              <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}"><h3 class="ld-product__title" th:text="${p.name}">Tên sản phẩm</h3></a>
              <div class="mt-2">
                <span class="fw-bold text-danger ld-product__price" th:text="${p.priceText != null ? p.priceText : (p.price != null ? #numbers.formatDecimal(p.price,1,0) + ' đ' : 'Liên hệ')}">299.000 đ</span>
              </div>
              <div class="d-flex gap-2 mt-3 mt-auto">
                <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="btn btn-sm btn-dark flex-grow-1">Mua ngay</a>
                <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="btn btn-sm btn-outline-secondary">Chi tiết</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12" th:if="${newProducts == null || #lists.isEmpty(newProducts)}">
          <div class="ld-empty">Đang cập nhật sản phẩm mới...</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Best Sellers -->
  <section id="best-sellers" class="ld-section">
    <div class="container">
      <div class="d-flex justify-content-between align-items-end mb-4 section-header">
        <h2 class="ld-title">Bán chạy</h2>
        <a th:href="@{/san-pham/danh-sach(sortBy='soLuong',sortDir='desc')}" class="ld-link">Xem thêm</a>
      </div>
      <div class="row g-3">
        <div class="col-6 col-md-4 col-lg-3" th:each="p : ${bestSelling}">
          <div class="card ld-product h-100 position-relative">
            <span class="badge text-bg-danger position-absolute top-0 start-0 m-2"
                  th:if="${p.discountPercent != null and p.discountPercent > 0}"
                  th:text="${'-' + p.discountPercent + '%'}">-25%</span>
            <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="ld-product__media ratio ratio-4x3">
              <img th:if="${p.imageUrl != null}" th:src="@{${p.imageUrl}}" class="w-100 h-100 object-fit-cover rounded-4" th:alt="${p.name}">
              <img th:unless="${p.imageUrl != null}" th:src="@{/client-static/images/insta3.jpg}" class="w-100 h-100 object-fit-cover rounded-4" th:alt="${p.name}">
            </a>
            <div class="card-body d-flex flex-column">
              <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}"><h3 class="ld-product__title" th:text="${p.name}">Tên sản phẩm</h3></a>
              <div class="mt-2">
                <span class="fw-bold text-danger ld-product__price" th:text="${p.priceText != null ? p.priceText : (p.price != null ? #numbers.formatDecimal(p.price,1,0) + ' đ' : 'Liên hệ')}">299.000 đ</span>
              </div>
              <div class="d-flex gap-2 mt-3 mt-auto">
                <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="btn btn-sm btn-dark flex-grow-1">Mua ngay</a>
                <a th:href="@{/san-pham/chi-tiet/{id}(id=${p.id})}" class="btn btn-sm btn-outline-secondary">Chi tiết</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12" th:if="${bestSelling == null || #lists.isEmpty(bestSelling)}">
          <div class="ld-empty">Đang cập nhật sản phẩm bán chạy...</div>
        </div>
      </div>
    </div>
  </section>
</main>
<script th:src="@{/client-static/js/home.js}"></script>
</body>
</html>